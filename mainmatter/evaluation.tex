\chapter{Testing and Evaluation}
The purpose of this chapter is to evaluate how effective is the developed mobile application in respect to applying the behaviour change theory discussed in Chapter \ref{Chapter:Literature-Review}. To examine that, a survey was carried out on several university students. Also, the system will be compared against the initial requirements discussed in chapter \ref{Chapter:Specification}. This comparison called \textit{Acceptance testing} will be discussed first followed by Functional and Usability testing discussion. Finally, results from a survey gathered from people who used the system for an entire day will be discussed.



\section{Acceptance Testing}
Acceptance testing is a key part of the software development process. It evaluates weather the software conforms with the client software requirements. Consequently, it is determined if the end-product is capable of performing the specified functionality. The following sub-components of the system will be discussed in terms of Acceptance testing, namely \textit{Goal-Setting Component} (\gls{gsc}), \textit{Monitoring Component} (\gls{mc}) and \textit{Feedback Component} (\gls{fc}).

\subsection{Goal-Setting Component}
All of the three specifications for this component were implemented successfully. The list of the implemented requirements can be seen in Appendix \ref{chapter:am-acceptance}.

The first requirement - "\gls{gsc}" shall provide list of recommended \gls{pa} goals - was implemented by utilising an Android framework component called \textit{Dialog} \citep{androiddialogs_2017}. A Dialog window is presented to the user so they can choose their \gls{pa} goal in minutes (e.g. 10, 20, 30, 60).

The second requirement \textit{"\gls{gsc} shall automatically set the recommended \gls{pa} goal if the user does not explicitly do so"} is implemented in the \textit{initial setup} set of screens discussed in section \ref{section:initial-setup-screens}. If the user decides to skip the \textit{initial-setup} screens (which offer options such as setting the \gls{pa}, \gls{mci} and the \textit{Sleeping Hours} time interval) default values are set. For example, the \gls{pa} goal is set to 30 minutes, \gls{mci} (or the \gls{st} goal) is set to 60 minutes and the \textit{Sleeping Hours} time interval is set to 8pm to 8am.

The third and last requirement "\gls{gsc} shall allow the user to set a Maximum Continuous Inactivity (MCI)..." was successfully implemented using a dialog window. It allows the user to set their \gls{st} (or \gls{mci}) goal by selecting it from a list of preset values in the dialog. In addition to the \textit{initial setup} screens the user is able to do that in the \textit{Settings} screen. 

\subsection{Monitoring component}
Four out of the five initially set features were fully implemented. The list of the implemented requirements can be seen in Appendix \ref{chapter:am-acceptance}.

First of those features \textit{HAR component shall recognise 4 activities(walking, running, cycling and static)} was implemented by gathering activity data from fellow university students and training a classifier to recognise the above-mentioned activities.

As far as \textit{\gls{mc} shall increment user's \gls{pa} or \gls{st} value whenever physical activity or sedentary behaviour is recognised} is concerned, this feature was implemented in the \textit{ActivityMonitor} class (see section \ref{section:activity-monitor}). This class is responsible for incrementing the activity and inactivity values depending on the recognised class by the classifier.

\textit{The system shall allow the user to group the collected data in "Daily" and "Weekly" representation}. This feature was implemented in the \textit{History} screen of \textit{ActiveMinutes}. The \gls{ui} of this screen includes \textit{DAILY} and \textit{WEEKLY} buttons allowing the user to switch between both representation of the collected data, accordingly.

The next requirement - \textit{The user shall be able to set the \textit{Sleeping Hours} time interval during which no measurement of \gls{pa} or \gls{st} should occur} - was implemented in the \textit{Settings} screen. The \gls{ui} of this screen provides the user with the option to change their \textit{Sleeping Hours} time interval by tapping on the appropriate menu item and choosing the desirable start and end times.

There were some features of the system that were not implemented since it was determined to be too complex given the project time constrains. One of those feature was \textit{The \gls{mc} shall personalise \gls{har}'s classifier}. This feature was discussed in section \ref{section:classifier-personal-service} and it has been designed as Android \textit{Service}. It uses the gathered-with-time and filtered by the classifier's confidence level data (e.g. above 80\% - to filter only the recognised activities with high confidence). The service combines this data with the general one and produces a personalised model that is used for further classification. According to \citet[376]{arapakis_athanasakos_jose_2010}, that is expected to improve the classifier's accuracy.

\subsection{Feedback Component}
As far as the \gls{fc} is concerned, a total of three features were successfully implemented. One of the initial requirements of the \gls{fc} was not implement due to the project's time constrains. \textit{FeedbackProvider} (see section \ref{section:feedback-provider}) represents the \gls{fc} implementation system-wise.

The first requirement - \textit{\gls{fc} shall notify the user when they are being sedentary for 1 hour} allows the user to be notified for a prolonged sedentary time. This feature was implemented by utilising Android's \textit{Notification} API. In addition, this API is used to satisfy another feature as well, namely \textit{\gls{fc} shall notify the user when a previously set goal is attained}. It allows the user to be notified when they achieve their daily goal (e.g. 30 minutes of \gls{pa}).

Another feature implemented feature - \textit{\gls{fc} shall not send notifications during the user set "Sleeping Hours" time interval} makes sure that the system stops monitoring user's \gls{pa} and \gls{st} levels when \textit{Sleeping Hours} time interval is entered. 

Last but not least, \textit{\gls{fc} shall send a notification to the user every Sunday to show goal-performance feedback for the past week} - a feature (or rather screen) which provides more information to the user regarding their goal-performance in comparison the only receiving notifications. Although "good-to-have", this feature was not implemented due to the project's time constrains rather than lack of technical capability. The list with all of the requirements of this component can be seen in Appendix \ref{chapter:am-acceptance}.

\section{Functional Testing}
This is a quality assurance (QA) test aiming to verify that the system is providing the same output as required by the end user. Generally, each test has an input, expected result, actual result and states whether the system passes the test or not.

Every feature of the system was tested to ensure that it works and satisfies the functional requirements of the system. For example, test cases verified that if the navigation of the system works as expected e.g., when the user preses the \textit{History} menu item of the navigational drawer, that takes the user to this screen. In addition, self-management was tested as well e.g., the goal-setting, monitoring and feedback components. For example, to test the monitoring component of the system the user (one of the project participants) had to perform 5 minutes of \gls{pa} or \gls{sb}. The result was compered with the \textit{Actual result} (if the system measures successfully the above amount). A snippet of the monitoring component functional testing can be seen in Table \ref{tab:monitoring-com-ft}.

\begin{table}[ht]
    \centering
    \fontsize{9}{12}\selectfont
    \tabulinesep=1mm
  \begin{longtabu} to \textwidth {|l|X|X|X|l|l|}
    \hline
      \textbf{Step No}
      & \textbf{Test Cases}
      & \textbf{Expected result}
      & \textbf{Actual result}
      & \textbf{Status}
    \endhead \hline
    1
    & The user starts the mobile application and performs 5 minutes of \textbf{walking}.
    & The system should recognise that the user is performing \gls{pa} and increments \textit{Active} time. 
    & Works as expected e.g., updates the \gls{ui} by adding 5 minutes to the \gls{pa} progress bar in \textit{Today} \& \textit{History} screens.
    & Pass
    \\ \hline
    2
    & The user starts the mobile application and performs 5 minutes of \textbf{running}.
    & The system should recognise that the user is performing \gls{pa} and increments \textit{Active} time. 
    & Works as expected e.g., updates the \gls{ui} by adding 5 minutes to the \gls{pa} progress bar in \textit{Today} \& \textit{History} screens.
    & Pass
    \\ \hline
\end{longtabu}
    \caption{Monitoring activity functional test snippet}
    \label{tab:monitoring-com-ft}
\end{table}

A total of 30 test cases in different categories were created to ensure that every implemented feature of the system is tested. The system successfully pass all of the tests. The device used during the tests was \textit{Google Pixel} \footnote{\url{https://madeby.google.com/intl/en_uk/phone/}}. All test cases can be seen in Appendix \ref{chapter:functional-testing}.

\section{Survey results}
In order to test \textit{ActiveMinutes}'s performance in a real-life scenario, the mobile application was deployed to a total of 3 fellow university students mobile phones. Each participant, used the application for a full day. 

A questionnaire was created containing a total of 9 questions. Consequently, valuable information was extracted from the survey participants such as if the system work i.e., apply behaviour change theory via self-management successfully. All questionnaire questions can be seen in Appendix ??.

